<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat Messages</title>
</head>

<body>
    {% for i in data %}

    {% if i.user_from_id == user.id %}
    <!-- Current user's message (right-aligned) -->
    <div class="par-r-mess">
        <div class="r-mess">
            <div style="display: flex; align-items: center; justify-content: flex-end; gap: 10px;">
                <div class="con-width">
                    {% if i.chat_file %}
                    <a href="{{ i.chat_file.url }}">
                        <img src="{{ i.chat_file.url }}" width="250px" height="250px" style="border-radius: 5%;" alt="">
                    </a>
                    {% else %}
                    {{ i.chat_content }}
                    {% endif %}
                </div>
                <div class="user-info">
                    {% if i.user_from %}
                    <img src="{% if i.user_from.user_photo %}{{ i.user_from.user_photo.url }}{% else %}#{% endif %}"
                        alt="">
                    <span>{{ i.user_from.username }}</span>
                    {% else %}
                    <span>Admin</span>
                    {% endif %}
                </div>
            </div>
            <div class="r-time">{{ i.chat_time|time }}</div>
        </div>
    </div>
    {% else %}
    <!-- Other users' message (left-aligned) -->
    <div class="par-s-mess">
        <div class="s-mess">
            <div style="display: flex; align-items: center; gap: 10px;">
                <div class="user-info">
                    {% if i.user_from %}
                    <img src="{% if i.user_from.user_photo %}{{ i.user_from.user_photo.url }}{% else %}#{% endif %}"
                        alt="">
                    <span>{{ i.user_from.username }}</span>
                    {% else %}
                    <span>Admin</span>
                    {% endif %}
                </div>
                <div class="con-width">
                    {% if i.chat_file %}
                    <a href="{{ i.chat_file.url }}">
                        <img src="{{ i.chat_file.url }}" width="250px" height="250px" style="border-radius: 5%;" alt="">
                    </a>
                    {% else %}
                    {{ i.chat_content }}
                    {% endif %}
                </div>
            </div>
            <div class="s-time">{{ i.chat_time|time }}</div>
        </div>
    </div>
    {% endif %}
    {% endfor %}
</body>

</html>